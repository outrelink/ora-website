<!DOCTYPE html>
<html lang="en" class="h-full bg-white antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Cancelled - ORA</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Preload Protos font for faster loading -->
    <link rel="preload" href="Protos.otf" as="font" type="font/otf" crossorigin>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: 'Protos';
            src: url('Protos.otf') format('opentype');
            font-weight: 800;
            font-style: normal;
            font-display: swap;
        }
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="min-h-screen antialiased text-slate-900 bg-white">
    <!-- Nav -->
    <header class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/60 bg-white/80 border-b border-slate-200/60">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="flex h-16 items-center justify-between">
                <a href="/" class="flex items-center gap-3">
                    <span class="text-lg font-semibold tracking-tight" style="font-family: 'Protos', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; letter-spacing: 1.5px; font-weight: 800;">ORA</span>
                </a>
                <a href="/" class="text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">‚Üê Back to Home</a>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="relative z-10 min-h-screen flex items-center justify-center px-6 py-20">
        <div class="max-w-2xl w-full">
            <div class="rounded-3xl border border-slate-200 p-12 text-center" style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);">
                <div class="mb-8">
                    <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-orange-500/10 flex items-center justify-center border border-orange-500/20">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-500">
                            <path d="m18 6-12 12"></path>
                            <path d="m6 6 12 12"></path>
                        </svg>
                    </div>
                    <h1 class="text-3xl lg:text-4xl text-slate-900 tracking-tight mb-4 font-manrope font-semibold">Payment Cancelled</h1>
                    <p class="text-lg text-slate-600 mb-6">Your subscription was not completed.</p>
                    
                    <!-- Countdown Timer -->
                    <div id="countdownContainer" class="mb-6">
                        <p class="text-base text-slate-600 mb-3">Returning to app automatically in:</p>
                        <div class="flex items-center justify-center gap-2 mb-4">
                            <div id="countdownNumber" class="text-5xl font-bold text-slate-400 font-manrope" style="min-width: 80px; text-align: center;">3</div>
                            <span class="text-xl text-slate-500">seconds</span>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <button id="returnToAppBtn" onclick="openApp()" class="w-full py-4 px-6 rounded-xl text-base font-semibold text-slate-700 border border-slate-200 hover:border-slate-300 transition-all duration-300 hover:bg-slate-50 flex items-center justify-center gap-2" style="background: rgba(255, 255, 255, 0.8);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-600">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" x2="3" y1="12" y2="12"></line>
                        </svg>
                        <span>Return to App Now</span>
                    </button>
                    <a href="/subscribe" class="block w-full py-4 px-6 rounded-xl text-sm font-medium text-white border border-orange-500 hover:border-orange-600 transition-all duration-300 text-center" style="background: #f97316;">
                        Try Again
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let countdownInterval = null;
        let countdownSeconds = 3;
        let autoOpenCancelled = false;

        // Countdown function
        function startCountdown() {
            const countdownNumber = document.getElementById('countdownNumber');
            const countdownContainer = document.getElementById('countdownContainer');
            
            if (!countdownNumber || !countdownContainer) return;

            countdownInterval = setInterval(() => {
                if (countdownSeconds > 0 && !autoOpenCancelled) {
                    countdownSeconds--;
                    countdownNumber.textContent = countdownSeconds;
                    
                    // Add pulse animation
                    countdownNumber.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        countdownNumber.style.transform = 'scale(1)';
                    }, 200);
                } else {
                    clearInterval(countdownInterval);
                    if (!autoOpenCancelled) {
                        // Hide countdown and open app
                        countdownContainer.style.display = 'none';
                        openApp(true);
                    }
                }
            }, 1000);
        }

        function openApp(automatic = false) {
            // Cancel auto-open if manual button was clicked
            if (!automatic) {
                autoOpenCancelled = true;
                clearInterval(countdownInterval);
                const countdownContainer = document.getElementById('countdownContainer');
                if (countdownContainer) {
                    countdownContainer.style.display = 'none';
                }
            }

            const returnBtn = document.getElementById('returnToAppBtn');
            
            // Update button to show loading state
            if (returnBtn) {
                returnBtn.innerHTML = '<svg class="animate-spin h-5 w-5 text-slate-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="ml-2">Opening App...</span>';
                returnBtn.disabled = true;
            }
            
            const deepLink = 'myora://subscription-cancel';
            window.location.href = deepLink;
            
            // Fallback message
            setTimeout(() => {
                if (document.visibilityState === 'visible') {
                    if (returnBtn) {
                        returnBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-600"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" x2="3" y1="12" y2="12"></line></svg><span class="ml-2">Return to App Now</span>';
                        returnBtn.disabled = false;
                    }
                }
            }, 2000);
        }

        // Start countdown when page loads
        const countdownNumber = document.getElementById('countdownNumber');
        if (countdownNumber) {
            countdownNumber.style.transition = 'transform 0.2s ease-in-out';
        }
        
        startCountdown();
    </script>
</body>
</html>
